<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd">
    <changeSet author="dm-comp" id="Add-Table-BLOOD_PRESSURE_MEASUREMENT" objectQuotingStrategy="LEGACY" runOnChange="true">
        <createTable tableName="BLOOD_PRESSURE_MEASUREMENT">
            <column name="ID" type="UUID">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="DATE_OF_RECORDING" type="DATE">
                <constraints nullable="true"/>
            </column>
            <column name="TIME_OF_RECORDING" type="TIME">
                <constraints nullable="false"/>
            </column>
            <column name="DIA_MM_HG" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="SYS_MM_HG" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="PULSE_PER_MINUTE" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="STATUS" type="VARCHAR(40)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="dm-comp" id="Add-Table-COMMENT" objectQuotingStrategy="LEGACY" runOnChange="true">
        <createTable tableName="COMMENT">
            <column name="ID" type="UUID">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="DATE_OF_RECORDING" type="DATE">
                <constraints nullable="true"/>
            </column>
            <column name="TIME_OF_RECORDING" type="TIME">
                <constraints nullable="false"/>
            </column>
            <column name="CONTENT" type="LONGVARCHAR">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="dm-comp" id="Add-Table-DOCTOR_TYPE" objectQuotingStrategy="LEGACY" runOnChange="true">
        <createTable tableName="DOCTOR_TYPE">
            <column name="ID" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="ID" tableName="DOCTOR_TYPE"/>
    </changeSet>
    <changeSet author="dm-comp" id="Add-Table-DOCTOR" objectQuotingStrategy="LEGACY" runOnChange="true">
        <createTable tableName="DOCTOR">
            <column name="ID" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="DOCTOR_TYPE" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="ID" tableName="DOCTOR"/>
        <addForeignKeyConstraint baseColumnNames="DOCTOR_TYPE" baseTableName="DOCTOR" constraintName="FK_DOCTOR_DOCTOR_TYPE_TO_DOCTOR_TYPE" referencedColumnNames="ID" referencedTableName="DOCTOR_TYPE"/>
    </changeSet>
    <changeSet author="dm-comp" id="Add-Table-DOCTORCONSULTATION" objectQuotingStrategy="LEGACY" runOnChange="true">
        <createTable tableName="DOCTOR_CONSULTATION">
            <column name="DATE" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="TIME" type="TIME">
                <constraints nullable="false"/>
            </column>
            <column name="ID" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="REASON" type="LONGVARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="DOCTOR" type="UUID">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="ID" tableName="DOCTOR_CONSULTATION"/>
        <addForeignKeyConstraint baseColumnNames="DOCTOR" baseTableName="DOCTOR_CONSULTATION" constraintName="FK_DOCTOR_CONSULTATION_DOCTOR_TO_DOCTOR" referencedColumnNames="ID" referencedTableName="DOCTOR"/>
    </changeSet>
    <changeSet author="dm-comp" id="Add-Medication-Tables" objectQuotingStrategy="LEGACY" runOnChange="true">
        <createTable tableName="MEDICATION">
            <column name="ID" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="MANUFACTURER" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="ID" tableName="MEDICATION"/>
        <createTable tableName="MEDICATION_LOG">
            <column name="MEDICATION" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="DATE_OF_INTAKE" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="TIME_OF_INTAKE" type="TIME">
                <constraints nullable="false"/>
            </column>
            <column name="ID" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="MEDICATION_UNIT" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="UNIT_COUNT" type="NUMERIC(5, 2)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="ID" tableName="MEDICATION_LOG"/>
        <createTable tableName="MEDICATION_UNIT">
            <column name="ID" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="TOKEN" type="VARCHAR(5)">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="ID" tableName="MEDICATION_UNIT"/>
        <createTable tableName="MANUFACTURER">
            <column name="ID" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="ID" tableName="MANUFACTURER"/>
        <addForeignKeyConstraint baseColumnNames="MANUFACTURER" baseTableName="MEDICATION" constraintName="FK_MEDICATION_MANUFACTURER_TO_MANUFACTURER" referencedColumnNames="ID" referencedTableName="MANUFACTURER"/>
        <addForeignKeyConstraint baseColumnNames="MEDICATION_UNIT" baseTableName="MEDICATION_LOG" constraintName="FK_MEDICATION_LOG_MEDICATION_UNIT_TO_MEDICATION_UNIT" referencedColumnNames="ID" referencedTableName="MEDICATION_UNIT"/>
        <addForeignKeyConstraint baseColumnNames="MEDICATION" baseTableName="MEDICATION_LOG" constraintName="FK_MEDICATION_LOG_MEDICATION_TO_MEDICATION" referencedColumnNames="ID" referencedTableName="MEDICATION"/>
    </changeSet>
    <changeSet author="dm-comp" id="Add-RESULT-Field-to-Table-DOCTOR_CONSULTATION" objectQuotingStrategy="LEGACY" runOnChange="true">
        <addColumn tableName="DOCTOR_CONSULTATION">
            <column name="RESULT" type="LONGVARCHAR">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="dm-comp" id="Add-SYMPTOM-Table" objectQuotingStrategy="LEGACY" runOnChange="true">
        <createTable tableName="SYMPTOM">
            <column name="DATE_OF_RECORDING" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="LONGVARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="ID" type="VARCHAR(40)">
                <constraints nullable="false"/>
            </column>
            <column name="TIME_OF_RECORDING" type="TIME">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="ID" tableName="SYMPTOM"/>
    </changeSet>
    <changeSet author="dm-comp" id="Add-Copy-Data-to-SYMPTOM-Table-and-Remove-Data-from-COMMENT-Table" objectQuotingStrategy="LEGACY" runOnChange="true">
        <sql>
            INSERT INTO SYMPTOM (ID, DATE_OF_RECORDING, DESCRIPTION, TIME_OF_RECORDING)
            SELECT ID, DATE_OF_RECORDING, CONTENT, TIME_OF_RECORDING FROM COMMENT;
        </sql>
        <sql>
            DELETE FROM COMMENT;
        </sql>
    </changeSet>
</databaseChangeLog>

